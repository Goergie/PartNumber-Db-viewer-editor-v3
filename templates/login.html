{% extends "layout.html" %}
{% block body %}
    <h2>Login</h2>
    {% if permission_error %}
        <p style="color:red"><strong>Error: {{ permission_error }}</strong>
    {% endif %}
    <form action="{{ url_for('login') }}" method=post>
        <dl>
            <dt>Username:<dd><input type="text" name="username" placeholder="Username">
            <br>
            <br>
            <dt>Password:<dd><input type="password" name="password" placeholder="Password">
            <br>
            <br>
            <dd><input type="submit" value="Login">
        </dl>
    </form>
    <div id="my-signin2"></div>
{% endblock %}
{% block script %}
<script>
    function onSuccess(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('Logged in as: ' + profile.getName());
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail());
    }
    function onFailure(error) {
        console.log(error);
    }
    function renderButton() {
        gapi.signin2.render('my-signin2', {
            'scope': 'profile email',
            'width': 240,
            'height': 50,
            'longtitle': true,
            'theme': 'dark',
            'onsuccess': onSuccess,
            'onfailure': onFailure
        });
    }
</script>
{% endblock %}
